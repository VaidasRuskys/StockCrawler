<?php

namespace AppBundle\Repository;

use AppBundle\Service\EmailReportReceiver;
use Doctrine\Common\Collections\ArrayCollection;

class EmailRepository
{
    /** @var EmailReportReceiver */
    private $receiver;

    /**
     * EmailRepository constructor.
     * @param EmailReportReceiver $receiver
     */
    public function __construct(EmailReportReceiver $receiver)
    {
        $this->receiver = $receiver;
    }

    /**
     * @return ArrayCollection
     * @throws \Exception
     */
    public function getEmails()
    {
        $result = new ArrayCollection();

        $emails = $this->receiver->receive();

        //$email['body'] = $this->getDebugEmail();

        //$result->add($email);

        return $result;
    }

    private function getDebugEmail()
    {
        return "<html><head>    <title>Daily Confirmation</title>    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">    <link rel=\"help\" href=\"http://www.metaquotes.net\">    <style type=\"text/css\">        @import url(https://fonts.googleapis.com/css?family=Roboto:300,400,500,600,700&subset=cyrillic-ext);        * {            font-family: 'Roboto', sans-serif !important;        }        @media screen {            body {                font: 12pt 'Roboto', sans-serif;            }        }        @media print {            body {                font: 12pt 'Roboto', sans-serif;            }        }        .msdate {            mso-number-format: \"General Date\";        }        .mspt {            mso-number-format: \#\, \#\#0\.00;        }        .footer {            font: 7pt 'Roboto', sans-serif;        }        .block {            margin-bottom: 20px;        }        --> table {            width: 100%        }        tr {            height: 26px;        }        td {            font-size: 14;            font-family: 'Roboto', sans-serif;            color: #42455A        }    </style></head><body style=\"width: 940; margin: auto;\">         <!-- ODD_COLOR=#E0E0E0 -->   <!-- EVEN_COLOR=#FFFFFF -->    <br>    <div style=\"margin-top: 40px ;font: 40px 'Roboto'; font-weight: 500;line-height: 47px;color: #424559;\">        <b> Admiral Markets UK Ltd.</b>    </div>    <br>    <br>    <br>    <div class=\"block\" style=\"color: #424559; font-size: 14px;line-height: 22px;\">        16 St Clare Street, London        <br>EC3N 1LQ, United Kingdom        <br>+ 44 (0) 20 7726 4003        <br>Email:        <a style=\"text-decoration: none; color:#2072E1\" href=\"mailto:helpme@admiralmarkets.co.uk\"> helpme@admiralmarkets.co.uk</a>    </div>    <br>    <div style=\"font: 18px 'Roboto'; font-weight: 500;line-height: 28px;color: #424559;\">        Daily Confirmation<br style=\"margin-bottom: 10px\">    </div>    <table cellspacing=\"1\" cellpadding=\"3\" border=\"0\" class=\"block\" width=\"100%\">        <tr align=\"left\">            <td colspan=\"2\" style=\"color: #42455A;font-size: 14px;line-height: 26px;\">                A/C No:                <b style=\"color: #42455A;font-size: 14px;font-weight: 500;line-height: 26px;\">                    27004659                </b>            </td>            <td colspan=\"6\" style=\"color: #42455A;font-size: 14px;fline-height: 26px;\">                Name:                <b style=\"color: #42455A;font-size: 14px;font-weight: 500;line-height: 26px;\">                    Vaidas Ruskys                </b>            </td>            <td colspan=\"2\" style=\"color: #42455A;font-size: 14px;line-height: 26px;\">                Currency:                <b style=\"color: #42455A;font-size: 14px;font-weight: 500;line-height: 26px;\">                    EUR                </b>            </td>            <td colspan=\"3\" align=\"right\" style=\"color: #42455A;font-size: 14px;line-height: 26px;\">                <b style=\"color: #42455A;font-size: 14px;font-weight: 500;line-height: 26px;\">                    2019 August 28, 23:59                </b> <br>            </td>        </tr>        <tr style=\"height: 26px\" align=\"left\">            <td colspan=\"13\">                <b style=\"color: #42455A;font-size: 14px;font-weight: 500;line-height: 16px;\"> Closed Transactions:</b>            </td>        </tr>        <tr style=\"height: 26px\" align=\"center\" bgcolor=\"#8B8EA8\" color=\"#ffffff\">            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Ticket</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\" nowrap align=\"left\"> &nbsp;&nbsp;&nbsp;Open Time</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Type</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Size</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Item</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Price</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> S/L</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> T/P</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\" nowrap align=\"left\"> &nbsp;&nbsp;&nbsp;Close Time</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Price</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Commission</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Swap</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Profit</td>        </tr>        <tr align=right><td colspan=13 nowrap align=center><tr style=\"height: 26px; font-size: 12px;line-height: 14px; background-color: #FFFFFF; color: #42455A\" align=\"center\"><td colspan=13; style=\"font-size: 12px; text-align: center\">No transactions</td></tr></td></tr>        <tr style=\"height: 26px; font-size: 12px;line-height: 14px;  color: #42455A;\" align=\"right\">            <td colspan=\"10\"> &nbsp;</td>            <td class=\"mspt\">                0.00            </td>            <td class=\"mspt\">                0.00            </td>            <td class=\"mspt\">                0.00            </td>        </tr>        <tr align=\"right\">            <td colspan=\"10\"> &nbsp;</td>            <td colspan=\"2\" align=\"right\" style=\"color: #42455A;font-size: 12px;line-height: 14px;\" title=\"Commission + Swap + Profit\">                <b style=\"font-weight:500\"> Closed P/L:</b>            </td>            <td colspan=\"1\" align=\"right\" style=\"color: #42455A;font-size: 12px;line-height: 14px;\" class=\"mspt\">                <b style=\"color: #42455A;font-size: 12px;line-height: 14px;font-weight:500\">                    0.00                </b>            </td>        </tr>        <tr align=\"right\">            <td colspan=\"10\"> &nbsp;</td>            <td colspan=\"2\" align=\"right\" style=\"color: #42455A;font-size: 12px;line-height: 14px;font-weight:500\">                <b style=\"color: #42455A;font-size: 12px;line-height: 14px;font-weight:500\"> Deposit/Withdrawal:</b>            </td>            <td colspan=\"1\" align=\"right \" style=\"color: #42455A;font-size: 12px;line-height: 14px;font-weight:500\" class=\"mspt\">                <b style=\"color: #42455A;font-size: 12px;line-height: 14px;font-weight:500\">                    0.00                </b>            </td>        </tr>        <tr align=\"right\">            <td colspan=\"10\"> &nbsp;</td>            <td colspan=\"2\" align=\"right\" style=\"color: #42455A;font-size: 12px;line-height: 14px;font-weight:500\">                <b style=\"color: #42455A;font-size: 12px;line-height: 14px;font-weight:500\"> Credit Facility:</b>            </td>            <td colspan=\"1\" align=\"right\" style=\"color: #42455A;font-size: 12px;line-height: 14px;font-weight:500\" class=\"mspt\">                <b style=\"color: #42455A;font-size: 12px;line-height: 14px;font-weight:500\">                    0.00                </b>            </td>        </tr>        <tr style=\"height: 26px\" align=\"left\">            <td colspan=\"13\">                <b style=\"color: #42455A;font-size: 14px;font-weight: 500;line-height: 16px;\"> Open Trades:</b>            </td>        </tr>        <tr style=\"height: 26px\" align=\"center\" bgcolor=\"#8B8EA8\" color=\"#ffffff\">            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Ticket</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\" nowrap align=\"left\"> &nbsp;&nbsp;&nbsp;Open Time</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Type</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Size</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Item</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Price</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> S/L</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> T/P</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\" nowrap align=\"left\"> &nbsp;&nbsp;&nbsp;Close Time</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Price</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Commission</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Swap</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Profit</td>        </tr>        <tr align=right><td>56582162</td><td nowrap>&nbsp;2019.08.26 16:39:51</td><td>buy</td><td>3.00</td><td>#cat</td><td>114.70</td><td>108.00</td><td>130.00</td><td nowrap>&nbsp;&nbsp;</td><td>114.84</td><td>-1.80</td><td>-0.08</td><td>0.38</td>        <tr style=\"height: 26px; font-size: 12px;line-height: 14px;  color: #42455A;\" align=\"right\">            <td colspan=\"10\"> &nbsp;</td>            <td class=\"mspt\">                -1.80            </td>            <td class=\"mspt\">                <!-- STORAGE-->            </td>            <td class=\"mspt\">                0.38            </td>        </tr>        <tr>            <td colspan=\"10\"> &nbsp;</td>            <td colspan=\"2\" align=\"right\" style=\"color: #42455A;font-size: 12px;line-height: 14px;\">                <b style=\"color: #42455A;font-size: 12px;line-height: 14px;font-weight:500\"> Floating P/L:</b>            </td>            <td colspan=\"1\" align=\"right\" title=\"Commission + Swap + Profit\" style=\"color: #42455A;font-size: 12px;line-height: 14px;\" class=\"mspt\">                <b style=\"color: #42455A;font-size: 12px;line-height: 14px;font-weight:500\">                    -1.50                </b>            </td>        </tr>        <tr align=\"left\">            <td colspan=\"13\">                <b style=\"color: #42455A;font-size: 14px;font-weight: 500;line-height: 16px;\"> Working Orders:</b>            </td>        </tr>        <tr style=\"height: 26px\" align=\"center\" bgcolor=\"#8B8EA8\" color=\"#ffffff\">            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Ticket</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\" nowrap align=\"left\"> &nbsp;&nbsp;&nbsp;Open Time</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Type</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Size</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Item</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> Price</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> S / L</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\"> T / P</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\" colspan=\"2\" nowrap> Market Price</td>            <td style=\"color: #F1F2F4;font-size: 12px;line-height: 14px;\" colspan=\"3\"> </td>        </tr>        <tr align=right><td>56582217</td><td nowrap>&nbsp;2019.08.26 16:40:51</td><td>buy limit</td><td>3.00</td><td>#msft</td><td>132.58</td><td>129.00</td><td>0.00</td><td nowrap>&nbsp;&nbsp;</td><td>135.51</td><td colspan=3></td></tr>        <tr>            <td> &nbsp;</td>        </tr>        <tr>            <td colspan=\"13\" align=\"left\">                <b style=\"font-size: 14px;font-weight: 500;line-height: 16px;color: #42455A;\"> A/C Summary:</b>            </td>        </tr>        <tr style=\"font-size: 14px;line-height: 16px;color: #42455A;\">            <td colspan=\"3\" align=\"left\"> Closed Trade P/L:</td>            <td colspan=\"2\" align=\"right\" class=\"mspt\">                0.00            </td>            <td colspan=\"2\"> &nbsp;</td>            <td colspan=\"3\" align=\"right\"> Previous Ledger Balance:</td>            <td colspan=\"3\" align=\"right\" class=\"mspt\">                561.73            </td>        </tr>        <tr style=\"font-size: 14px;line-height: 16px;color: #42455A;\">            <td colspan=\"3\" align=\"left\"> Deposit/Withdrawal:</td>            <td colspan=\"2\" align=\"right\" class=\"mspt\">                0.00            </td>            <td colspan=\"2\"> &nbsp;</td>            <td colspan=\"3\" align=\"right\"> Balance:</td>            <td colspan=\"3\" align=\"right\" class=\"mspt\">                561.73            </td>        </tr>        <tr style=\"font-size: 14px;line-height: 16px;color: #42455A;\">            <td colspan=\"3\" align=\"left\"> Total Credit Facility:</td>            <td colspan=\"2\" align=\"right\" class=\"mspt\">                0.00            </td>            <td colspan=\"2\"> &nbsp;</td>            <td colspan=\"3\" align=\"right\"> Previous Equity:</td>            <td colspan=\"3\" align=\"right\" class=\"mspt\">                556.29            </td>        </tr>        <tr style=\"font-size: 14px;line-height: 16px;color: #42455A;\">            <td colspan=\"5\" align=\"left\"> </td>            <td colspan=\"2\"> &nbsp;</td>            <td colspan=\"3\" align=\"right\"> Equity:</td>            <td colspan=\"3\" align=\"right\" class=\"mspt\">                560.23            </td>        </tr>        <tr style=\"font-size: 14px;line-height: 16px;color: #42455A;\">            <td colspan=\"5\" align=\"left\"> </td>            <td colspan=\"2\"> &nbsp;</td>            <td colspan=\"3\" align=\"right\"> Floating P/L:</td>            <td colspan=\"3\" align=\"right\" class=\"mspt\">                -1.50            </td>        </tr>        <tr style=\"font-size: 14px;line-height: 16px;color: #42455A;\">            <td colspan=\"5\" align=\"left\"> </td>            <td colspan=\"2\"> &nbsp;</td>            <td colspan=\"3\" align=\"right\"> Margin Requirements:</td>            <td colspan=\"3\" align=\"right\" class=\"mspt\">                61.90            </td>        </tr>        <tr style=\"font-size: 14px;line-height: 16px;color: #42455A;\">            <td colspan=\"5\" align=\"left\"> </td>            <td colspan=\"2\"> &nbsp;</td>            <td colspan=\"3\" align=\"right\"> Available Margin:</td>            <td colspan=\"3\" align=\"right\" class=\"mspt\">                498.33            </td>        </tr>    </table>    <div class=\"block\" style=\"font-weight: 500; color: #42455A;font-size: 14px;line-height: 20px;\">        Best Regards<br>        Admiral Markets    </div>    <div class=\"footer\">        <p style=\"font-size: 14px;color: #42455A;line-height: 16px;\">            Admiral Markets UK Ltd is registered in England and Wales under Companies House – registration number 08171762.<br>			Admiral Markets UK Ltd is authorised and regulated by the Financial Conduct Authority (FCA) – registration number 595450.<br>			The registered office for Admiral Markets UK Ltd is: 16 St. Clare Street, London, EC3N 1LQ, United Kingdom.        </p>        <p style=\"font-size: 14px;color: #42455A;line-height: 16px;\">            Please report to us within 24 hours if this statement is incorrect. Otherwise this statement will be considered to be confirmed by you.        </p>    </div></body></html>";
    }
}